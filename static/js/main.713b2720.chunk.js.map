{"version":3,"sources":["actions/router.js","actions/board.js","common/redux.js","components/MainMenu.js","components/Options.js","components/About.js","components/NewGame.js","components/LevelSelect.js","components/board/Layer.js","components/board/MouseLayer.js","components/board/GameBoard.js","components/board/Infobar.js","components/routes.js","components/Ingame.js","components/CustomRouter.js","lib/attacks.js","lib/Unit.js","reducers/boardReducer.js","reducers/index.js","reducers/routerReducer.js","App.js","index.js"],"names":["changeRoute","route","type","boardMouseClick","tileX","tileY","x","y","selectAttack","attack","undoMovement","connectRedux","mapStateToProps","arguments","length","undefined","actions","connect","_","merge","_ref","files","props","react_default","a","createElement","className","Button","onClick","bsSize","bsStyle","NewGame","createClass","getInitialState","name","changeName","this","setState","render","_this","value","state","onChange","e","target","levels","range","map","n","key","Layer","index","children","width","height","style","zIndex","MouseTile","board","_ref2","tile","exists","_ref4","_ref3","tiles","i","TileBackground","fill","opacity","TileLayer","GameBoard_TileBackground","Unit","unit","rects","color","push","textLength","image","finished","UnitLayer","units","GameBoard_Unit","EffectsLayer","_ref7","_ref8","_ref5","selectedUnit","selectedAttack","hasMovementLeft","otherUnitsTiles","flatMap","filter","center","head","found","find","every","otherUnitsTile","isEqual","href","renderMovementIndicators","concat","playerUnits","cpuUnits","_ref6","selectedUnitTile","renderAttackIndicators","_ref10","boardSelection","_ref9","GameBoard_TileLayer","GameBoard_UnitLayer","board_MouseLayer","Attack","selectedClass","currentTurn","maxLength","movesTaken","moves","JSON","stringify","getAttacks","Infobar_Attack","routes","/","MainMenu","/options","Options","/about","About","/new-game","/level-select","LevelSelect","/ingame","board_Infobar","board_GameBoard","CurrentRoute","console","warn","attacks","attack1","description","damage","attack2","baseInfo","player_unit1","cpu_unit1","Object","classCallCheck","attrs","startTurn","atk","allAttacks","some","unitTile","amount","take","tile1","tile2","Math","abs","newTiles","reject","unshift","removeTiles","canMoveTo","otherUnit","endTurn","startingTiles","cloneDeep","rows","cols","j","DEFAULT_STATE","checkOtherStatuses","log","nextTeam","forEach","objectSpread","reducers","action","clickedTile","clickedUnit","isOn","canAttack","performAttack","t","isAnyOtherUnitOn","moveTo","resetMovement","store","createStore","combineReducers","App","es","components_CustomRouter","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.713b2720.chunk.js","sourcesContent":["export function changeRoute(route) {\n    return { type: 'CHANGE_ROUTE', route };\n}\n","export function boardMouseClick(tileX, tileY) {\n    return { type: 'BOARD_MOUSE_CLICK', x: tileX, y: tileY };\n}\n\nexport function selectAttack(attack) {\n    return { type: 'SELECT_ATTACK', attack };\n}\n\nexport function undoMovement(attack) {\n    return { type: 'UNDO_MOVEMENT' };\n}\n","import { connect } from 'react-redux';\nimport { changeRoute } from '../actions/router';\nimport { boardMouseClick, selectAttack, undoMovement } from '../actions/board';\nimport _ from 'lodash';\n\nexport function connectRedux(mapStateToProps = null, actions = {}) {\n    return connect(mapStateToProps, _.merge({}, actions, {\n        changeRoute,\n        boardMouseClick,\n        selectAttack,\n        undoMovement,\n    }));\n}\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { connectRedux } from '../common/redux';\n\nconst MainMenu = (props) => {\n    return (\n        <div className='text-center'>\n            <div className=\"row top\" />\n            <h1>\n        The Game\n            </h1>\n            <div className=\"row\">\n                <Button onClick={() => props.changeRoute('/new-game')} bsSize='lg' bsStyle='primary'>New Game</Button>\n            </div>\n            <div className=\"row\">\n                <Button onClick={() => props.changeRoute('/options')} bsSize='lg' bsStyle='primary'>Options</Button>\n            </div>\n            <div className=\"row\">\n                <Button onClick={() => props.changeRoute('/about')} bsSize='lg' bsStyle='primary'>About</Button>\n            </div>\n        </div>\n    );\n};\n\nexport default connectRedux(({files}) => ({files}))(MainMenu);\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { connectRedux } from '../common/redux';\n\nconst Options = (props) => {\n    return (\n        <div className='text-center'>\n            <div className=\"row top\" />\n            <h1>\n        Options\n            </h1>\n            <div className=\"row\">\n                <Button onClick={() => props.changeRoute('/')} bsSize='lg' bsStyle='primary'>Back</Button>\n            </div>\n        </div>\n    );\n};\n\nexport default connectRedux()(Options);\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { connectRedux } from '../common/redux';\n\nconst About = (props) => {\n    return (\n        <div className='text-center'>\n            <div className=\"row top\" />\n            <h1>\n        About\n            </h1>\n            <h4>\n        I made it\n            </h4>\n            <div className=\"row\">\n                <Button onClick={() => props.changeRoute('/')} bsSize='lg' bsStyle='primary'>Back</Button>\n            </div>\n        </div>\n    );\n};\n\nexport default connectRedux()(About);\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { connectRedux } from '../common/redux';\nimport createClass from 'create-react-class';\n\nconst NewGame = createClass({\n    getInitialState() {\n        return {\n            name: '',\n        };\n    },\n\n    changeName(name) {\n        this.setState({name});\n    },\n\n    render() {\n        return (\n            <div className='text-center'>\n                <div className=\"row top\" />\n                <h1>\n          New Game\n                </h1>\n                <label>Name</label>\n                <input className=\"form-control\" value={this.state.name} onChange={e => this.changeName(e.target.value)} />\n                <div className=\"row\">\n                    <Button onClick={() => this.props.changeRoute('/level-select')} bsSize='lg' bsStyle='primary'>Start Game</Button>\n                </div>\n                <div className=\"row\">\n                    <Button onClick={() => this.props.changeRoute('/')} bsSize='lg' bsStyle='primary'>Cancel</Button>\n                </div>\n            </div>\n        );\n    },\n});\n\nexport default connectRedux(({files}) => ({files}))(NewGame);\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { connectRedux } from '../common/redux';\nimport _ from 'lodash';\n\nconst LevelSelect = (props) => {\n    const levels = _.range(1, 10);\n    return (\n        <div>\n            <div className=\"row top\" />\n            <div className=\"row\">\n                <div className=\"col-md-6\">\n                    <h1>Choose Level</h1>\n                    {levels.map(n => <div key={n} className=\"row\"><Button onClick={() => props.changeRoute('/ingame')}>Level {n}</Button></div>)}\n                </div>\n                <div className=\"col-md-6\">\n                    <Button>Shop</Button>\n                    <Button>Units</Button>\n                </div>\n\n            </div>\n        </div>\n    );\n};\n\nexport default connectRedux()(LevelSelect);\n","import React from 'react';\n\nexport default ({index, children}) => {\n    return (\n        <svg width=\"690\" height=\"460\" style={{zIndex: index}}>\n            {children}\n        </svg>\n    );\n};\n","import React from 'react';\nimport { connectRedux } from '../../common/redux';\n\nimport Layer from './Layer';\n\nconst MouseTile = connectRedux(({board}) => ({board}))(({tile, boardMouseClick, board}) => {\n    if(!tile.exists) {\n        return null;\n    }\n    return (\n        <rect x={tile.x * 46} y={tile.y * 46} width=\"40\" height=\"40\" className='mouse-tile' onClick={() => boardMouseClick(tile.x, tile.y)}/>\n    );\n});\n\nconst MouseLayer = ({board}) => {\n    return (\n        <Layer index={4}>\n            {board.tiles.map((tile, i) => <MouseTile key={i} tile={tile} />)}\n        </Layer>\n    );\n}\n\nexport default connectRedux(({board}) => ({board}))(MouseLayer);\n","import React from 'react';\nimport { connectRedux } from '../../common/redux';\nimport _ from 'lodash';\n\nimport MouseLayer from './MouseLayer';\nimport Layer from './Layer';\n\nconst TileBackground = ({tile}) => {\n    if(!tile.exists) {\n        return null;\n    }\n    return (\n        <rect x={tile.x * 46} y={tile.y * 46} width=\"40\" height=\"40\" style={{fill: 'white', opacity: 0.25}} />\n    );\n};\n\nconst TileLayer = ({tiles}) => {\n    return (\n        <Layer index={1}>\n            {tiles.map((tile, i) => <TileBackground key={i} tile={tile} />)}\n        </Layer>\n    );\n};\n\nconst Unit = ({unit}) => {\n    if(unit.tiles.length === 0) {\n        return null;\n    }\n    let rects = unit.tiles.map((tile, i) =>\n        <rect key={i} x={tile[0] * 46} y={tile[1] * 46} width=\"40\" height=\"40\" fill={unit.color} />\n    );\n    rects.push(<text key='pic' x={unit.tiles[0][0] * 46} y={unit.tiles[0][1] * 46 + 40} textLength=\"40\">{unit.image}{unit.finished && 'âœ“'}</text>)\n    return rects;\n};\n\nconst UnitLayer = ({units}) => {\n    return (\n        <Layer index={2}>\n            {units.map((unit, i) => <Unit key={i} unit={unit} />)}\n        </Layer>\n    );\n};\n\nconst renderMovementIndicators = ({selectedUnit, tiles, units, selectedAttack}) => {\n    if(!selectedUnit || !selectedUnit.hasMovementLeft() || selectedAttack) {\n        return null;\n    }\n    let otherUnitsTiles = _.flatMap(units.filter(unit => unit !== selectedUnit), 'tiles');\n    let center = selectedUnit.head();\n\n    let indicators = [\n        [center[0], center[1] + 1],\n        [center[0], center[1] - 1],\n        [center[0] + 1, center[1]],\n        [center[0] - 1, center[1]],\n    ].filter(tile => {\n        let found = _.find(tiles, {x: tile[0], y: tile[1]});\n        return found && found.exists && _.every(otherUnitsTiles, otherUnitsTile => !_.isEqual(otherUnitsTile, tile));\n    });\n    return indicators.map((tile, index) => <image key={index} href='assets/movement.png' width='40' height='40' x={tile[0] * 46} y={tile[1] * 46} />);\n};\n\nconst renderAttackIndicators = ({selectedAttack, selectedUnit, tiles}) => {\n    if(!selectedAttack) {\n        return null;\n    }\n    let center = selectedUnit.head();\n    let indicators = [\n        [center[0], center[1] + 1],\n        [center[0], center[1] - 1],\n        [center[0] + 1, center[1]],\n        [center[0] - 1, center[1]],\n    ].filter(tile => {\n        let found = _.find(tiles, {x: tile[0], y: tile[1]});\n        return found && found.exists && _.every(selectedUnit.tiles, selectedUnitTile => !_.isEqual(selectedUnitTile, tile));\n    });\n    return indicators.map((tile, index) => <image key={index} href='assets/target.png' width='40' height='40' x={tile[0] * 46} y={tile[1] * 46} />);\n}\n\nconst EffectsLayer = connectRedux(({board}) => ({board}))(({board}) => {\n    return (\n        <Layer index={3}>\n            {renderMovementIndicators({\n                tiles: board.tiles,\n                selectedUnit: board.selectedUnit,\n                units: _.concat(board.playerUnits, board.cpuUnits),\n                selectedAttack: board.selectedAttack,\n            })}\n            {renderAttackIndicators({\n                selectedAttack: board.selectedAttack,\n                selectedUnit: board.selectedUnit,\n                tiles: board.tiles,\n            })}\n        </Layer>\n    );\n});\n\nconst GameBoard = ({board}) => {\n    return (\n        <div>\n            <TileLayer tiles={board.tiles} />\n            <UnitLayer units={_.concat(board.playerUnits, board.cpuUnits)} />\n            <EffectsLayer />\n            <MouseLayer />\n        </div>\n    );\n};\n\nexport default connectRedux(({board, boardSelection})=>({board, boardSelection}))(GameBoard);\n","import React from 'react';\nimport { connectRedux } from '../../common/redux';\n\nconst Attack = ({attack, selectAttack, selectedAttack}) => {\n    let selectedClass = '';\n    if(selectedAttack && selectedAttack.name === attack.name) {\n        selectedClass = 'selected-attack';\n    }\n    return (\n        <div className={'attack ' + selectedClass} onClick={() => selectAttack(attack)}>\n            {attack.name}\n        </div>\n    );\n};\n\nconst Infobar = ({board, selectAttack, undoMovement}) => {\n    let unit = board.selectedUnit;\n    if(!unit) {\n        return <div><h4>{board.currentTurn}</h4></div>;\n    }\n    return (\n        <div>\n            <h4>{board.currentTurn}</h4>\n            <h3>{unit.name}</h3>\n            {unit.finished && <div>Turn Finished</div>}\n            <div>Health: {unit.tiles.length}</div>\n            <div>Max Health: {unit.maxLength}</div>\n            <div>Move: {unit.movesTaken}/{unit.moves}</div>\n            <div>attack: {JSON.stringify()}</div>\n            {unit.getAttacks().map((attack, index) =>\n                <Attack selectedAttack={board.selectedAttack}  key={index} attack={attack} selectAttack={selectAttack} />\n            )}\n            <div onClick={() => undoMovement()}>Undo</div>\n        </div>\n    );\n};\n\nexport default connectRedux(({board})=>({board}))(Infobar);\n","import MainMenu from './MainMenu';\nimport Options from './Options';\nimport About from './About';\nimport NewGame from './NewGame';\nimport LevelSelect from './LevelSelect';\nimport Ingame from './Ingame';\n\nexport default {\n    '/': MainMenu,\n    '/options': Options,\n    '/about': About,\n    '/new-game': NewGame,\n    '/level-select': LevelSelect,\n    '/ingame': Ingame,\n};\n","import React from 'react';\nimport { connectRedux } from '../common/redux';\nimport GameBoard from './board/GameBoard';\nimport Infobar from './board/Infobar';\n\nconst Ingame = () => {\n    return (\n        <div>\n            <div className=\"row top\" />\n            <div className=\"row\">\n                <div className=\"col-md-3\">\n                    <ul className=\"list-group\">\n                        <Infobar />\n                    </ul>\n                </div>\n                <div className=\"col-md-9\">\n                    <GameBoard />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default connectRedux()(Ingame);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport routes from './routes'\n\nconst CustomRouter = (props) => {\n    let CurrentRoute = routes[props.route];\n\n    if(CurrentRoute) {\n        return <CurrentRoute />;\n    } else {\n        console.warn(`Route did not match - '${props.route}'`);\n        return <span />;\n    }\n};\n\nexport default connect(({route}) => ({route}))(CustomRouter);\n","\nconst attacks = {\n    attack1: {\n        name: 'attack_one',\n        type: 'standard',\n        description: 'does an attack super goodly',\n        damage: 2,\n    },\n    attack2: {\n        name: 'cpu_attack',\n        type: 'standard',\n        description: 'does an attack super goodly',\n        damage: 1,\n    },\n};\n\nexport default attacks;\n","import _ from 'lodash';\nimport allAttacks from './attacks';\n\nconst baseInfo = {\n    player_unit1: {\n        image: 'r',\n        tiles: [],\n        color: 'orange',\n        name: 'the_unit',\n        maxLength: 5,\n        moves: 4,\n        attacks: ['attack1', 'attack2'],\n    },\n    cpu_unit1: {\n        image: 'Z',\n        tiles: [],\n        color: 'lightblue',\n        name: 'the_bad_guy',\n        maxLength: 6,\n        moves: 8,\n        attacks: ['attack2'],\n    },\n};\n\nfunction tileDistance(tile1, tile2) {\n    return Math.abs(tile1[0] - tile2[0]) + Math.abs(tile1[1] - tile2[1]);\n};\n\nclass Unit {\n    constructor(type, tiles) {\n        let attrs = baseInfo[type];\n        if(!attrs) {\n            console.warn('cannot find unit type ' + type);\n        }\n        _.merge(this, attrs);\n        this.tiles = tiles;\n        this.startTurn();\n    }\n\n    getAttacks() {\n        return this.attacks.map(atk => allAttacks[atk]);\n    }\n\n    head() {\n        return this.tiles[0];\n    }\n\n    isOn(tile) {\n        return _.some(this.tiles, unitTile => _.isEqual(unitTile, tile));\n    }\n\n    removeTiles(amount) {\n        if(amount <= 0) return;\n        this.tiles = _.take(this.tiles, this.tiles.length - amount);\n    }\n\n    canMoveTo(tile) {\n        return tileDistance(this.head(), tile) === 1;\n    }\n\n    moveTo(tile) {\n        let newTiles = _.reject(this.tiles, unitTile => _.isEqual(unitTile, tile));\n        newTiles.unshift(tile);\n        this.tiles = newTiles;\n        this.removeTiles(this.tiles.length - this.maxLength);\n        this.movesTaken += 1;\n    }\n\n    canAttack(tile, attack) {\n        // todo\n        return this.canMoveTo(tile);\n    }\n\n    performAttack(attack, otherUnit) {\n        if(attack.type === 'standard') {\n            otherUnit.removeTiles(attack.damage);\n        }\n        this.endTurn();\n    }\n\n    hasMovementLeft() {\n        return this.movesTaken < this.moves && !this.finished;\n    }\n\n    startTurn() {\n        this.movesTaken = 0;\n        this.finished = false;\n        this.startingTiles = _.cloneDeep(this.tiles);\n    }\n\n    endTurn() {\n        this.finished = true;\n    }\n\n    resetMovement() {\n        this.movesTaken = 0;\n        this.tiles = _.cloneDeep(this.startingTiles);\n    }\n\n}\n\nexport default Unit;\n","import _ from 'lodash';\nimport Unit from '../lib/Unit';\n\nconst rows = _.range(0, 15);\nconst cols = _.range(0, 10);\n\nlet tiles = _.flatMap(cols, i => rows.map(j => (\n    {\n        x: j,\n        y: i,\n        exists: true,\n    }\n)));\n\n_.find(tiles, tile => tile.x === 1 && tile.y === 4).exists = false;\n_.find(tiles, tile => tile.x === 2 && tile.y === 5).exists = false;\n_.find(tiles, tile => tile.x === 4 && tile.y === 4).exists = false;\n_.find(tiles, tile => tile.x === 6 && tile.y === 4).exists = false;\n\n\nconst DEFAULT_STATE = {\n    selectedUnit: null,\n    selectedAttack: null,\n    tiles: tiles,\n    playerUnits: [\n        new Unit('player_unit1', [[1,2], [2,2], [2,3], [2,4]]),\n    ],\n    cpuUnits: [\n        new Unit('cpu_unit1', [[6,2], [7,2], [7,3], [7,4]]),\n    ],\n    currentTurn: 'playerUnits',\n};\n\n_.forEach(DEFAULT_STATE.cpuUnits, unit => unit.endTurn());\n\nfunction isAnyOtherUnitOn({playerUnits, cpuUnits, selectedUnit}, tile) {\n    let tiles = _(playerUnits).concat(cpuUnits).reject(unit => unit === selectedUnit).flatMap('tiles').value();\n    return _.some(tiles, t => _.isEqual(t, tile));\n}\n\nfunction checkOtherStatuses(state) {\n    if(_.every(state[state.currentTurn], 'finished')) {\n        console.log('finished', state.currentTurn);\n        let nextTeam = state.currentTurn === 'playerUnits' ? 'cpuUnits' : 'playerUnits';\n        _.forEach(state[nextTeam], unit => unit.startTurn());\n        state.currentTurn = nextTeam;\n    }\n    return {\n        ...state,\n        playerUnits: _.filter(state.playerUnits, unit => unit.tiles.length > 0),\n        cpuUnits: _.filter(state.cpuUnits, unit => unit.tiles.length > 0),\n    };\n}\n\nexport default (state = DEFAULT_STATE, action = {}) => {\n    if(action.type === 'BOARD_MOUSE_CLICK') {\n        let clickedTile = [action.x, action.y];\n        let clickedUnit = _.find(_.concat(state.playerUnits, state.cpuUnits), unit => unit.isOn(clickedTile));\n        if(state.selectedAttack && !state.selectedUnit.finished && state.selectedUnit.canAttack(clickedTile, state.selectedAttack)) { // attack mode\n            if(clickedUnit) {\n                state.selectedUnit.performAttack(state.selectedAttack, clickedUnit);\n            } else {\n                state.selectedUnit.endTurn();\n            }\n            return checkOtherStatuses({...state, selectedUnit: null, selectedAttack: null});\n        } else { // movement mode\n            if(state.selectedUnit && state.selectedUnit.hasMovementLeft() && (!clickedUnit || clickedUnit === state.selectedUnit)) {\n                let boardTile = _.find(state.tiles, {x: action.x, y: action.y});\n                if(boardTile.exists && !isAnyOtherUnitOn(state, clickedTile) && state.selectedUnit.canMoveTo(clickedTile)) {\n                    state.selectedUnit.moveTo(clickedTile);\n                    return checkOtherStatuses({...state});\n                }\n            }\n            return checkOtherStatuses({...state, selectedUnit: clickedUnit, selectedAttack: null});\n        }\n\n    } else if(action.type === 'SELECT_ATTACK') {\n        return checkOtherStatuses({...state, selectedAttack: action.attack});\n    } else if(action.type === 'UNDO_MOVEMENT') {\n        if(state.selectedUnit) {\n            state.selectedUnit.resetMovement()\n        }\n        return checkOtherStatuses({...state, selectedAttack: null});\n    }\n    return state;\n};\n","import { createStore, combineReducers } from 'redux';\nimport routerReducer from './routerReducer';\nimport boardReducer from './boardReducer';\n\nconst reducers = {\n    route: routerReducer,\n    board: boardReducer,\n};\n\nexport const store = createStore(combineReducers(reducers));\n","const DEFAULT_STATE = '/ingame';\n\nexport default (state = DEFAULT_STATE, action = {}) => {\n    if(action.type === 'CHANGE_ROUTE') {\n        return action.route;\n    } else {\n        return state;\n    }\n};\n","import React from 'react';\nimport createClass from 'create-react-class';\nimport CustomRouter from './components/CustomRouter';\nimport { store } from './reducers';\nimport { Provider } from 'react-redux';\n\nconst App = createClass({\n    render() {\n        return (\n            <Provider store={store}>\n                <div className=\"container\">\n                    <CustomRouter />\n                </div>\n            </Provider>\n        );\n    }\n});\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './custom.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}